---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import fs from "fs";
import path from "path";

const albumDir = path.resolve("public/assets/gallery");

let albums = [];
if (fs.existsSync(albumDir)) {
  albums = fs.readdirSync(albumDir).filter((name) => {
    const fullPath = path.join(albumDir, name);
    return fs.statSync(fullPath).isDirectory();
  });
}
---

<Layout>
  <Header />

  <main class="max-w-6xl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-6">ğŸ“ ç›¸å†Œå½’æ¡£</h1>

    {albums.length === 0 ? (
      <p class="text-gray-500 italic">æš‚æ— ç›¸å†Œï¼Œå¿«å»æ—…è¡Œå§ï¼ğŸŒ</p>
    ) : (
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        {albums.map((album) => (
          <a
            href={`/gallery/${album}`}
            class="block bg-gray-100 p-4 rounded shadow hover:bg-gray-200 transition"
          >
            <h2 class="text-xl font-semibold capitalize">{album}</h2>
            <p class="text-sm text-gray-600">ç‚¹å‡»æŸ¥çœ‹ &rarr;</p>
          </a>
        ))}
      </div>
    )}
  </main>

  <Footer />
</Layout>
