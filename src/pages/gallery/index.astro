---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import fs from "fs";
import path from "path";

import Main from "@/layouts/Main.astro";
const albumDir = path.resolve("public/assets/gallery");

// let albums = [];
let albums: string[] = [];
if (fs.existsSync(albumDir)) {
  albums = fs.readdirSync(albumDir).filter((name) => {
    const fullPath = path.join(albumDir, name);
    return fs.statSync(fullPath).isDirectory();
  });
}
---

<Layout>
  <Header />

  <Main pageTitle="📁 Gallery" pageDesc="A visual archive of places I’ve explored and captured.">

    <!-- {albums.length === 0 ? (
      <p class="text-gray-500 italic">暂无相册，快去旅行吧！🌏</p>
    ) : (
      <ul class="space-y-4">
        {albums.map((album) => (
          <li class="text-left">
            <a
              href={`/gallery/${album}`}
              class="text-xl font-mono text-blue-600 hover:underline"
            >
              {album}
            </a>
            <p class="text-sm text-gray-600">View →</p>
          </li>
        ))}
      </ul>
    )} -->
    {albums.length === 0 ? (
      <p class="text-gray-500 italic">暂无相册，快去旅行吧！🌏</p>
    ) : (
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        {albums.map((album) => (
          <a
            href={`/gallery/${album}`}
            class="block bg-gray-100 p-4 rounded shadow hover:bg-gray-200 transition"
          >
            <h2 class="text-xl font-semibold capitalize">{album}</h2>
            <p class="text-sm text-gray-600">View &rarr;</p>
          </a>
        ))}
      </div>
    )}
    
  </Main>

  

  <Footer />
</Layout>
